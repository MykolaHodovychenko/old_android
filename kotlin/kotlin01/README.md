# Знакоство с Kotlin и базовый синтаксис

## Общие сведения о языке

Kotlin — **статически типизированный**, объектно-ориентированный язык программирования (с поддержкой процедурного программирования ), работающий поверх Java Virtual Machine и разрабатываемый компанией JetBrains. Также компилируется в JavaScript и в исполняемый код ряда платформ через инфраструктуру LLVM. Язык назван в честь острова Котлин в Финском заливе, на котором расположен город Кронштадт.

Основные возможности и преимущества Kotlin:

- компилириуется в байткод JVM или в JavaScript
- программы могут использовать все существующие Java-фреймворки и библиотеки. Kotlin можно интегрировать с Maven, Gradle и другими системами сборки
- язык прост для изучения
- исходный код открыт
- язык null-безопасен

Так как Kotlin был изначально спроектирован как JVM-язык, полностью совместимый с Java и наоборот, вы без труда можете наследоваться от существующих Java-классов, обращаться к ним и применять Java-аннотации к вашим Kotlin-классам и методам.
Прежде всего,  IntelliJ компилирует код Kotlin, используя компилятор kotlinc-jvm. Это означает, что IntelliJ транслирует код на Kotlin в байт-код, язык, на котором "разговаривает" JVM.

<p align="center">
  <img src="img/img_01.png" />
</p>

## Базовый синтаксис

### Создание стартового проекта

Создадим новый проект с поддержкой Kotlin в IntelliJ IDEA

<p align="center">
  <img src="img/img_02.png" />
</p>

Далее в папке `src` создайте пакет и создайте в нем `Kotlin File`.

В файле вы увидите запись

```kotlin Main.kt
package example
```

Как и в Java, в языке Kotlin файлы и классы объединяются в пакеты. Функциональность пакетов в обоих языках идентична, за исключением того, что в Kotlin не обязательно (но крайне желательно), чтобы пакеты повторяли структуру директорий на диске.

Как и в Java, для запуска проекта нам необходимо создать точку входа - метод `main()`.

В Kotlin функция `main()` имеет две возможных сигнатуры

```kotlin
package example

// Первая сигнатура
fun main(args: Array<String>) {
    println("Hello, Kotlin!")
}

// Вторая сигнатура
fun main() {
    println("Hello, Kotlin!")
}
```

Первое что мы можем заметить  ключевое слово `fun`, которым в Kotlin помечаются **функции**.

В отличие от Java, в которой используется термин **метод**, в Kotlin используется термин **функция**. Это связано с тем, что согласно идеологии языка Java, весь исполняемый код находится внутри классов. Таким образом, в Java нет функций вне объекта того или иного класса (вопрос статических функций оставим в стороне).

В языке Kotlin поддерживается механизм функций верхнего уровня (top-level functions).

*Понятие "верхнего уровня" (top-level) не стоит путать с понятием "высшего порядка" (higher-order)*

Функции верхнего уровня - это функции, которые определяются в файле вне других функций, объектов, классов или интерфейсов, сами по себе, просто внутри пакета.

Но здесь кроется один нюанс - язык Kotlin должен быть совместим с Java и выполняется внутри JVM. Поэтому, "под капотом" вместо функции верхнего уровня будет создан класс со статическим методом.

Создадим файл MyFile и внутри него определим функцию myFunc(). Код на языке Kotlin будет выглядеть следующим образом

```kotlin
package example

fun myFunc() {
    println("Hello!")
}
```

Теперь в IDEA выберем пункт меню `Tools->Kotlin->Show Kotlin Bytecode` и в открывшемся окне справа нажмем на кнопку `Decompile`, после чего мы увидим java-код, который будет идентичен коду на Kotlin с точки зрения байткода

```java
public final class MyFileKt {
   public static final void myFunc() {
      String var0 = "Hello!";
      boolean var1 = false;
      System.out.println(var0);
   }
}
```

**Важно понимать, что многие "фишки" языка Kotlin существуют лишь на уровне исходного кода, для удобства разработчика**

Продолжаем разбирать исходный код стартового проекта. Строка 

```kotlin
fun main(args: Array<String>) {
```

говорит нам о том, что в Kotlin используется **Pascal notation**, то есть объявления вида `name: type`. Аргументы отделяются друг от друга запятой.

Массивы в Kotlin моделируются обобщенным классом `Array<T>`. Более подробно мы рассмотрим массивы позже.

Далее, рассмотрим строку

```kotlin
println("Hello, Kotlin!")
```

Обратите внимание, что для вызова функции `println()` мы не подключали никаких библиотек.

Классы и утилиты Kotlin содержатся внутри стандартной библиотеки Kotlin (**Kotlin Standard Library**). Она содержит ключевые компоненты языка Kotlin.

В каждый kotlin-файл по умолчанию импортируются следующие пакеты, которые входят в стандартную библиотеку Kotlin:

- `kotlin.*`
- `kotlin.annotation.*`
- `kotlin.collections.*`
- `kotlin.comparisons.*`
- `kotlin.io.*`
- `kotlin.ranges.*`
- `kotlin.sequences.*`
- `kotlin.text.*`

Также, если целевой платформой Kotlin является JVM (как в нашем случае), то дополнительно импортируются следующие пакеты:

- `java.lang.*`
- `kotlin.jvm.*`

Таким образом, мы можем использовать большое количество готовых классов и функций без необходимости их явно импортировать.

Ну и последнее, на что стоит обратить внимание - нет нужны ставить `;` после каждой инструкции (есть два исключения, но пока не будем их касаться)